"use strict";(self.webpackChunkwiki_42_mwx=self.webpackChunkwiki_42_mwx||[]).push([[847],{4861:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var s=n(4848),d=n(8453);const r={sidebar_position:4},c=void 0,l={id:"rank 02/Minitalk/client",title:"client",description:"Explica\xe7\xe3o Detalhada: client.c \ud83d\udcbb",source:"@site/docs/rank 02/Minitalk/client.mdx",sourceDirName:"rank 02/Minitalk",slug:"/rank 02/Minitalk/client",permalink:"/wiki_ft/docs/rank 02/Minitalk/client",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rank 02/Minitalk/client.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Como funciona server.c",permalink:"/wiki_ft/docs/rank 02/Minitalk/server"},next:{title:"Push Swap",permalink:"/wiki_ft/docs/category/push-swap"}},o={},a=[{value:"Explica\xe7\xe3o Detalhada: <code>client.c</code> \ud83d\udcbb",id:"explica\xe7\xe3o-detalhada-clientc-",level:2},{value:"Objetivo Geral \ud83d\udccc",id:"objetivo-geral-",level:3},{value:"C\xf3digo Explicado \ud83e\udde0",id:"c\xf3digo-explicado-",level:3},{value:"\ud83d\udd04 Envio dos sinais",id:"-envio-dos-sinais",level:3},{value:"ft_atoi(argv[1])",id:"ft_atoiargv1",level:3},{value:"Envio da mensagem \ud83d\udce4",id:"envio-da-mensagem-",level:3},{value:"Exemplo Pr\xe1tico \ud83e\uddea",id:"exemplo-pr\xe1tico-",level:3},{value:"Fluxo: (O)",id:"fluxo-o",level:4},{value:"Resumo \u2705",id:"resumo-",level:3}];function t(e){const i={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.h2,{id:"explica\xe7\xe3o-detalhada-clientc-",children:["Explica\xe7\xe3o Detalhada: ",(0,s.jsx)(i.code,{children:"client.c"})," \ud83d\udcbb"]}),"\n",(0,s.jsxs)(i.p,{children:["O ",(0,s.jsx)(i.code,{children:"client.c"})," \xe9 o respons\xe1vel por enviar uma ",(0,s.jsx)(i.strong,{children:"mensagem como sinal bin\xe1rio"})," para o processo servidor (",(0,s.jsx)(i.code,{children:"server.c"}),") utilizando sinais Unix (",(0,s.jsx)(i.code,{children:"SIGUSR1"})," e ",(0,s.jsx)(i.code,{children:"SIGUSR2"}),"). Ele converte cada caractere da mensagem em bits e envia, bit a bit, para o servidor que est\xe1 escutando."]}),"\n",(0,s.jsx)(i.h3,{id:"objetivo-geral-",children:"Objetivo Geral \ud83d\udccc"}),"\n",(0,s.jsxs)(i.p,{children:["Transformar uma mensagem de texto em uma s\xe9rie de sinais (",(0,s.jsx)(i.code,{children:"SIGUSR1"})," e ",(0,s.jsx)(i.code,{children:"SIGUSR2"}),") para que o servidor possa reconstruir a mensagem original."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"c\xf3digo-explicado-",children:"C\xf3digo Explicado \ud83e\udde0"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-c",children:"void send_char(int pid, unsigned char c)\n"})}),"\n",(0,s.jsx)(i.p,{children:"Par\xe2metros"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"pid:"})," n\xfamero do processo do servidor (obtido pelo terminal)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"c:"})," caractere a ser enviado"]}),"\n"]}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(i.em,{children:(0,s.jsxs)(i.strong,{children:["\xc9 ",(0,s.jsx)(i.code,{children:"unsigned char"})," porque estamos lidando com valores ASCII de 0 a 255, sem precisar de n\xfameros negativos."]})})]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Loop de bits: envio bit a bit \ud83d\udd01"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-C",children:"int bit = 7;\nwhile (bit >= 0)\n"})}),"\n",(0,s.jsx)(i.p,{children:"Cada caractere tem 8 bits. Este loop vai iterar de 7 a 0."}),"\n",(0,s.jsx)(i.h3,{id:"-envio-dos-sinais",children:"\ud83d\udd04 Envio dos sinais"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-C",children:"if ((c >> bit) & 1)\n    kill(pid, SIGUSR2); // se bit for 1\nelse\n    kill(pid, SIGUSR1); // se bit for 0\n\n"})}),"\n",(0,s.jsx)(i.p,{children:"Explica\xe7\xe3o: \ud83e\uddee"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"(c >> bit)"}),": desloca o bit atual para a posi\xe7\xe3o mais \xe0 direita"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"& 1"}),": isola apenas aquele bit"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"kill(pid, SIGUSR2)"}),": envia sinal SIGUSR2 se o bit for 1"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"kill(pid, SIGUSR1)"}),": envia sinal SIGUSR1 se o bit for 0"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"usleep(600)"}),": Aguarda 600 microssegundos para garantir que o servidor consiga processar o sinal. \ud83d\udca4"]}),"\n",(0,s.jsx)(i.p,{children:"Fun\xe7\xe3o main \ud83e\uddf5"}),"\n",(0,s.jsxs)(i.p,{children:["Pode notar que u coloquei uma verificacao de ",(0,s.jsx)(i.code,{children:"argc != 3"})," e totalmente opcional voce pode querer fazer a verificacao de outra maneira e ta tudo bem..\nNo meu caso:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Verifica se o n\xfamero de argumentos est\xe1 correto."}),"\n",(0,s.jsxs)(i.li,{children:["Esperamos: ",(0,s.jsx)(i.code,{children:"./client <PID> <MENSAGEM>"})]}),"\n",(0,s.jsx)(i.li,{children:"Se diferente, mostramos instru\xe7\xe3o de uso e interrompemos o programa."}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"ft_atoiargv1",children:"ft_atoi(argv[1])"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-C",children:"pid = ft_atoi(argv[1]);\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Converte a string do PID em int"}),"\n",(0,s.jsxs)(i.li,{children:["Assim nos deixa verificar se o ",(0,s.jsx)(i.code,{children:"PID"})," vai ser menor ou igual a zero"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-C",children:"if (pid <= 0)\n"})}),"\n",(0,s.jsx)(i.h3,{id:"envio-da-mensagem-",children:"Envio da mensagem \ud83d\udce4"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-C",children:"while (*msg)\n    send_char(pid, *msg++);\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Percorre a string e envia caractere por caractere."}),"\n",(0,s.jsxs)(i.li,{children:["Envia um ",(0,s.jsx)(i.code,{children:"\\0"})," no final como terminador para o servidor saber que a mensagem terminou."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"exemplo-pr\xe1tico-",children:"Exemplo Pr\xe1tico \ud83e\uddea"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-C",children:'./client 4242 "oi"\n'})}),"\n",(0,s.jsx)(i.h4,{id:"fluxo-o",children:"Fluxo: (O)"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:['"4242" \xe9 convertido com ',(0,s.jsx)(i.code,{children:"ft_atoi"})]}),"\n",(0,s.jsx)(i.li,{children:'"o" \u2192 01101111 \u2192 sinal por sinal igual na tabela'}),"\n",(0,s.jsx)(i.li,{children:'"i" \u2192 01101001 \u2192 sinal por sinal igual na tabela'}),"\n",(0,s.jsx)(i.li,{children:'"\\0" \u2192 00000000 \u2192 sinal por sinal igual na tabela'}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["\ud83e\uddfe ",(0,s.jsxs)(i.strong,{children:["Tabela de Convers\xe3o: Letra ",(0,s.jsx)(i.code,{children:"'o'"})," (ASCII 111 / Bin\xe1rio 01101111)"]})]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Bit Atual"}),(0,s.jsx)(i.th,{children:(0,s.jsx)(i.code,{children:"(c >> bit)"})}),(0,s.jsx)(i.th,{children:"Bin\xe1rio ap\xf3s shift"}),(0,s.jsx)(i.th,{children:(0,s.jsx)(i.code,{children:"(c >> bit) & 1"})}),(0,s.jsx)(i.th,{children:"Valor do Bit"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"7"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 7"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00000000"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"0"})}),(0,s.jsx)(i.td,{children:"0"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"6"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 6"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00000001"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1"})}),(0,s.jsx)(i.td,{children:"1"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"5"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 5"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00000011"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1"})}),(0,s.jsx)(i.td,{children:"1"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"4"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 4"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00000110"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"0"})}),(0,s.jsx)(i.td,{children:"0"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"3"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 3"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00001101"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1"})}),(0,s.jsx)(i.td,{children:"1"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"2"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 2"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00011011"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1"})}),(0,s.jsx)(i.td,{children:"1"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"1"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 1"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"00110111"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1"})}),(0,s.jsx)(i.td,{children:"1"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"0"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111 >> 0"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"01101111"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1"})}),(0,s.jsx)(i.td,{children:"1"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"resumo-",children:"Resumo \u2705"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Elemento"}),(0,s.jsx)(i.th,{children:"Fun\xe7\xe3o"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"argc != 3"})}),(0,s.jsx)(i.td,{children:"Garante que o usu\xe1rio passe os 2 argumentos necess\xe1rios"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"ft_atoi"})}),(0,s.jsx)(i.td,{children:"Converte PID (string) em n\xfamero inteiro"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"unsigned char"})}),(0,s.jsx)(i.td,{children:"Trabalha com valores de 0 a 255 (ASCII)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"kill"})}),(0,s.jsx)(i.td,{children:"Envia sinais para outro processo"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SIGUSR1"})}),(0,s.jsx)(i.td,{children:"Representa bit 0"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SIGUSR2"})}),(0,s.jsx)(i.td,{children:"Representa bit 1"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"usleep(600)"})}),(0,s.jsx)(i.td,{children:"D\xe1 tempo entre sinais para o servidor n\xe3o perder"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"send_char"})}),(0,s.jsx)(i.td,{children:"Envia um caractere bit a bit para o servidor"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"\\0"})}),(0,s.jsx)(i.td,{children:"Marca o fim da mensagem"})]})]})]})]})}function h(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>l});var s=n(6540);const d={},r=s.createContext(d);function c(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);