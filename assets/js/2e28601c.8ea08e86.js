"use strict";(self.webpackChunkwiki_42_mwx=self.webpackChunkwiki_42_mwx||[]).push([[1988],{3057:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=t(4848),a=t(8453);const i={},l="Read File",o={id:"rank 02/FdF/guia_fdf_pronta/src/map/read_file",title:"Read File",description:"Arquivo especifico para leitura e parse do mapa",source:"@site/docs/rank 02/FdF/guia_fdf_pronta/src/map/read_file.mdx",sourceDirName:"rank 02/FdF/guia_fdf_pronta/src/map",slug:"/rank 02/FdF/guia_fdf_pronta/src/map/read_file",permalink:"/wiki_ft/docs/rank 02/FdF/guia_fdf_pronta/src/map/read_file",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rank 02/FdF/guia_fdf_pronta/src/map/read_file.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Map files",permalink:"/wiki_ft/docs/category/map-files"},next:{title:"Hooks",permalink:"/wiki_ft/docs/category/hooks"}},d={},c=[{value:"Read_file",id:"read_file",level:3},{value:"Init get resources from file",id:"init-get-resources-from-file",level:3},{value:"Fill matrix",id:"fill-matrix",level:3},{value:"Fill value and color",id:"fill-value-and-color",level:3}];function s(e){const r={code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"read-file",children:"Read File"})}),"\n",(0,n.jsx)(r.p,{children:"Arquivo especifico para leitura e parse do mapa"}),"\n",(0,n.jsx)(r.h3,{id:"read_file",children:"Read_file"}),"\n",(0,n.jsx)(r.p,{children:"Funcao que pega as informacoes do mapa e popula a matrix por aloca\xe7\xe3o contigua"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c",metastring:"read_file.c",children:"int\tread_file(char *file_name, t_fdf *data)\r\n{\r\n\tint fd;\r\n\tchar *line;\r\n\tint i;\r\n\r\n\ti = -1;\r\n\tif (!init_get_resources_from_file(data, file_name))\r\n\t\treturn (0);\r\n\tdata->z_matrix = (t_point *)malloc(sizeof(t_point) * data->height * data->width); \t// Aloca\xe7\xe3o cont\xedgua\r\n\tif (!data->z_matrix)\r\n\t\treturn (0);\r\n\tfd = open(file_name, O_RDONLY);\r\n\tif (fd < 0)\r\n\t{\r\n\t\tfree(data->z_matrix);\r\n\t\treturn (0);\r\n\t}\r\n\twhile (++i < data->height)\r\n\t{\r\n\t\tline = get_next_line(fd);\r\n\t\tif (line == NULL)\r\n\t\t\tbreak;\r\n\t\tfill_matrix(&data->z_matrix[i * data->width], line, data->width);\r\n\t}\r\n\tclose(fd);\r\n\treturn (1);\r\n}\n"})}),"\n",(0,n.jsx)(r.h3,{id:"init-get-resources-from-file",children:"Init get resources from file"}),"\n",(0,n.jsx)(r.p,{children:"Funcao que atribui a altura e largura e verifica se deu certo a atribuicao (funcao para linhas)"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c",metastring:"init_get_resources_from_file",children:"static int\tinit_get_resources_from_file(t_fdf *data, char *file_name)\r\n{\r\n\tdata->height = get_height(file_name);\r\n\tdata->width = get_width(file_name);\r\n\tif (data->width <= 0 || data->height <= 0)\r\n\t\treturn (0);\r\n\treturn (1);\r\n}\n"})}),"\n",(0,n.jsx)(r.h3,{id:"fill-matrix",children:"Fill matrix"}),"\n",(0,n.jsx)(r.p,{children:"Separa as coisas e depois da o fill abaixo"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c",children:"static void\tfill_matrix(t_point *z_line, char *line, int width)\r\n{\r\n\tchar\t\t**nums;\r\n\tint\ti;\r\n\r\n\ti = 0;\r\n\tnums = ft_split(line, ' ');\r\n\tif (!nums)\r\n\t{\r\n\t\tfree(nums);\r\n\t\treturn ;\r\n\t}\r\n\twhile (nums[i] && i < width)\r\n\t{\r\n\t\tif (!fill_value_and_color(nums[i], &z_line[i]))\r\n\t\t{\r\n\t\t\tfree(nums[i]);\r\n\t\t\ti++;\r\n\t\t\tcontinue ;\r\n\t\t}\r\n\t\tfree(nums[i]);\r\n\t\ti++;\r\n\t}\r\n\tfree(nums);\r\n\tfree(line);\r\n}\n"})}),"\n",(0,n.jsx)(r.h3,{id:"fill-value-and-color",children:"Fill value and color"}),"\n",(0,n.jsx)(r.p,{children:"extrai tanto o valor num\xe9rico (para a coordenada Z) quanto a cor (para a representa\xe7\xe3o visual de um ponto em um gr\xe1fico)."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c",metastring:"fill_value_and_color",children:"static int\tfill_value_and_color(char *num_str, t_point *z_line)\r\n{\r\n\tchar\t**value_and_color;\r\n\r\n\tvalue_and_color = ft_split(num_str, ','); // Separa valor e cor\r\n\tif (!value_and_color)\r\n\t\treturn (0);\r\n\tz_line->value = ft_atoi(value_and_color[0]); // Primeiro elemento \xe9 o valor Z\r\n\tif (value_and_color[1]) // Verifica se h\xe1 cor definida\r\n\t\tz_line->hex = ft_strdup(value_and_color[1]); // Duplica a cor para o hex\r\n\telse\r\n\t\tz_line->hex = ft_strdup(\"0xFFFFFF\"); // Cor padr\xe3o (branco)\r\n\tfree(value_and_color[0]);\r\n\tif (value_and_color[1])\r\n\t\tfree(value_and_color[1]);\r\n\tfree(value_and_color);\r\n\treturn (1);\r\n}\n"})})]})}function u(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(s,{...e})}):s(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>l,x:()=>o});var n=t(6540);const a={},i=n.createContext(a);function l(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);